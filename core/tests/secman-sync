#!/bin/bash

SM_GH_UN=$(git config user.name)
create=$(gh repo create $SM_GH_UN/.secman -y --private)
brew_gh=$(brew install gh)

function repo() {
    local install_brew=$(/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)")

    if [ -x "$(command -v gh)" ]; then
        ${create}
    else
        if [ -x "$(command -v brew)" ]; then
            ${brew_gh}

            if [ -x "$(command -v gh)" ]; then
                ${create}
            fi
        else
            ${install_brew}

            if [ -x "$(command -v brew)" ]; then
                ${brew_gh}

                if [ -x "$(command -v gh)" ]; then
                    ${create}
                fi
            fi
        fi
    fi
}

function corgit() {
    local install_cgit=$(/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Dev-x-Team/corgit/main/setup)")

    if [ -x "$(command -v cgit)" ]; then
        cgit ph
    else
        ${install_cgit}

        if [ -x "$(command -v cgit)" ]; then
            cgit ph
        fi
    fi
}

function clonex() {
    if [ -d "~/.secman" ]; then
        rm -rf ~/.secman
        DIR="pwd"

        cd
        gh repo clone $SM_GH_UN/.secman

        cd $DIR
    fi
}

clonex